<!DOCTYPE HTML>
<html>
<head>
	<title>Scroller - Normal</title>
	<link rel="stylesheet" href="asset/ui.css" />
	
	<script src="asset/Animate.js"></script>
	<script src="asset/Scroller.js"></script>

	<script src="asset/render.js"></script>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  <style>
/** pour la CSS **/
#container .el{
  display:block;
  width:10px;
  height:10px;
  background:url("asset/sprite.png") 0 0 no-repeat;
}
/* on d√©cale l'image de fond de la hauteur du lien, soit 31 px */
#container .grass1{background-position:0px 0px;}
#container .grass2{background-position:-30px 0px;}
#container .water{background-position:-100px -20px;}
#container .ground1{background-position:-30px -60px;}
#container .ground2{background-position:-30px -500px;}


</style>
</head>
<body>
	<div id="container">
		<div id="content"></div>
	</div>
	
	<div id="settings" style="display:none">
		<div><label for="scrollingX">ScrollingX: </label><input type="checkbox" id="scrollingX" checked/></div>
		<div><label for="scrollingY">ScrollingY: </label><input type="checkbox" id="scrollingY" checked/></div>
		<div><label for="animating">Animating: </label><input type="checkbox" id="animating" checked/></div>
		<div><label for="bouncing">Bouncing: </label><input type="checkbox" id="bouncing" checked/></div>
		<div><label for="locking">Locking: </label><input type="checkbox" id="locking" checked/></div>

		<div><label for="zooming">Zooming: </label><input type="checkbox" id="zooming" checked/></div>
		<div><label for="minZoom">Min Zoom: </label><input type="text" id="minZoom" size="5" value="0.5"/></div>
		<div><label for="maxZoom">Max Zoom: </label><input type="text" id="maxZoom" size="5" value="3"/></div>
		<div><label for="zoomLevel">Zoom Level: </label><input type="text" id="zoomLevel" size="5"/></div>
		<div><button id="zoom">Zoom to Level</button><button id="zoomIn">+</button><button id="zoomOut">-</button></div>
		
		<div><label for="scrollLeft">Scroll Left: </label><input type="text" id="scrollLeft" size="9"/></div>
		<div><label for="scrollTop">Scroll Top: </label><input type="text" id="scrollTop" size="9"/></div>
		<div><button id="scrollTo">Scroll to Coords</button></div>

		<div><button id="scrollByUp">&uarr;</button><button id="scrollByDown">&darr;</button><button id="scrollByLeft">&larr;</button><button id="scrollByRight">&rarr;</button></div>
	</div>

	<!-- Custom rendering code -->
	<script type="text/javascript">
		// Settings
		var contentWidth = 4500;
		var contentHeight = 4500;
		var cellWidth = 100;
		var cellHeight = 100;

		// Initialize layout
		var container = document.getElementById("container");
		var content = document.getElementById("content");

		content.style.width = contentWidth + "px";
		content.style.height = contentHeight + "px";


		// // Generate content
		// var size = 100;
		// var frag = document.createDocumentFragment();
		// for (var row=0, rl=contentHeight/size; row<rl; row++) {
		// 	for (var col=0, cl=contentWidth/size; col<cl; col++) {
		// 		elem = document.createElement("div");
		// 		elem.style.backgroundColor = row%2 + col%2 > 0 ? "#ddd" : "";
		// 		elem.style.width = cellWidth + "px";
		// 		elem.style.height = cellHeight + "px";
		// 		elem.style.display = "inline-block";
		// 		elem.style.textIndent = "6px";
		// 		elem.innerHTML = row + "," + col;
		// 		frag.appendChild(elem);
		// 	}
		// }
		// elem2 = document.createElement("h1");
		// elem2.id = "drag";
		// elem2.innerHTML = "tutu";
		// elem2.style.position = "absolute";
		// elem2.style.top = "100px";
		// elem2.style.left = "100px";

		// content.appendChild(frag);
		// $(content).append(elem2)
		
	</script>
	

<!-- <canvas id="noise_1" width="10000" height="1000"></canvas> -->

<script type="text/javascript">
            var noise     = generateNoise();
            // var canvas     = document.getElementById('noise_1');
            // var context = canvas.getContext('2d');

            for(x = 0; x < noise.length; x++)
            {
                for(y = 0; y < noise[x].length; y++)
                {
                    var color = Math.round((255 * noise[x][y]));
                    var className = "ground2 el";
                    if(noise[x][y] == 0.2) className = "ground1 el";
                    if(noise[x][y] == 0.4) className = "grass2 el";
                    if(noise[x][y] == 0.6) className = "grass1 el";
                    if(noise[x][y] == 1) className = "water el";
                    $('<div>', {id : 'maDiv', class: className, style: 'position:absolute;width:30px;height:30px;top:'+x*30+'px;left:'+y*30+'px;'}).appendTo($(content));
 
                    // context.fillStyle = "rgb("+color+", "+color+", "+color+")";
                    // context.fillRect(x*10, y*10, 100, 100);
                }
            }

            function generateNoise()
            {
                var noiseArr = new Array();

                for(i = 0; i <= 5; i++)
                {
                    noiseArr[i] = new Array();

                    for(j = 0; j <= 5; j++)
                    {
                        var height = Math.random();

                        if(i == 0 || j == 0 || i == 5 || j == 5)
                            height = 1;

                        noiseArr[i][j] = height;
                    }
                }

                return(flatten(interpolate(noiseArr)));
            }

            function interpolate(points)
            {
                var noiseArr = new Array()
                var x = 0;
                var y = 0;

                for(i = 0; i < 150; i++)
                {
                    if(i != 0 && i % 30 == 0)
                        x++;

                    noiseArr[i] = new Array();
                    for(j = 0; j < 150; j++)
                    {
                        
                        if(j != 0 && j % 30 == 0)
                            y++;

                        var mu_x = (i%30) / 30;
                        var mu_2 = (1 - Math.cos(mu_x * Math.PI)) / 2;

                        var int_x1     = points[x][y] * (1 - mu_2) + points[x+1][y] * mu_2;
                        var int_x2     = points[x][y+1] * (1 - mu_2) + points[x+1][y+1] * mu_2;

                        var mu_y = (j%30) / 30;
                        var mu_2 = (1 - Math.cos(mu_y * Math.PI)) / 2;
                        var int_y = int_x1 * (1 - mu_2) + int_x2 * mu_2;

                        noiseArr[i][j] = int_y;
                    }
                    y = 0;
                }        
                return(noiseArr);
            }

            function flatten(points)
            {
                var noiseArr = new Array()
                for(i = 0; i < points.length; i++)
                {
                    noiseArr[i] = new Array()
                    for(j = 0; j < points[i].length; j++)
                    {

                        if(points[i][j] < 0.2)
                            noiseArr[i][j] = 0;

                        else if(points[i][j] < 0.4)
                            noiseArr[i][j] = 0.2;

                        else if(points[i][j] < 0.6)
                            noiseArr[i][j] = 0.4;

                        else if(points[i][j] < 0.8)
                            noiseArr[i][j] = 0.6;

                        else
                            noiseArr[i][j] = 1;
                    }
                }

                return(noiseArr);
            }

</script>
	<!-- Create Scroller, bind UI layer and mouse/touch events -->
	<script src="asset/ui.js"></script>
	
	
	</body>
</html>


